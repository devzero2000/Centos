diff --git a/modules/proxy/mod_proxy_balancer.c b/modules/proxy/mod_proxy_balancer.c
index e0ccc31..c6c7e89 100644
--- a/modules/proxy/mod_proxy_balancer.c
+++ b/modules/proxy/mod_proxy_balancer.c
@@ -22,7 +22,7 @@
 #include "apr_version.h"
 #include "ap_hooks.h"
 #include "apr_date.h"
-#include "apr_escape.h"
+#include "util_md5.h"
 #include "mod_watchdog.h"
 
 static const char *balancer_mutex_type = "proxy-balancer-shm";
@@ -774,9 +774,8 @@ static apr_status_t lock_remove(void *data)
             }
         }
     }
-    apr_md5_final(md5, &md5_ctx);
 
-    return apr_pescape_hex(p, md5, sizeof md5, 0);
+    return ap_md5contextTo64(p, &md5_ctx);
 }
 
 /*
